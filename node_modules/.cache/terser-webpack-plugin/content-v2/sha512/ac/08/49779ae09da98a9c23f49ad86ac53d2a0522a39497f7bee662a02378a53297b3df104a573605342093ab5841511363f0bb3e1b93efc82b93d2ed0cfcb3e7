{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{355:function(s,t,e){\"use strict\";e.r(t);var a=e(42),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"docker\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker\"}},[s._v(\"#\")]),s._v(\" Docker\")]),s._v(\" \"),e(\"h2\",{attrs:{id:\"docker-主要特性\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-主要特性\"}},[s._v(\"#\")]),s._v(\" Docker 主要特性\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"文件、资源、网络隔离\")]),s._v(\" \"),e(\"li\",[s._v(\"变更管理、 日志记录\")]),s._v(\" \"),e(\"li\",[s._v(\"写时复制\")])]),s._v(\" \"),e(\"h2\",{attrs:{id:\"linux-安装-docker\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#linux-安装-docker\"}},[s._v(\"#\")]),s._v(\" Linux 安装 Docker\")]),s._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[s._v(\"删除旧版本（没有则跳过）\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum remove docker \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-client \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-client-latest \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-common \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-latest \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-latest-logrotate \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-logrotate \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n              docker-engine\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"安装依赖\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y yum-utils \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\ndevice-mapper-persistent-data \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\nlvm2\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\")])]),e(\"p\",[s._v(\"添加 stable 的 Docker-ce 的源：\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum-config-manager \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n--add-repo \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\nhttps://download.docker.com/linux/centos/docker-ce.repo\\n\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"安装 docker-ce:\\n\"),e(\"code\",[s._v(\"sudo yum install docker-ce docker-ce-cli containerd.io\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"启动服务\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"sudo systemctl start docker\")])]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"查看服务状态\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"systemctl status docker\")])]),s._v(\" \"),e(\"li\",[s._v(\"查看正在运行的镜像\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"docker ps\")])]),s._v(\" \"),e(\"li\",[s._v(\"查看所有镜像\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"docker ps -a\")])])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"docker 镜像加速设置\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[s._v(\"vim /etc/docker/daemon.json\")]),s._v(\"\\n写入到文件\")])]),s._v(\" \"),e(\"div\",{staticClass:\"language-json line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),e(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v('\"registry-mirrors\"')]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://registry.docker-cn.com\"')]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\")])]),e(\"ul\",[e(\"li\",[s._v(\"重启服务\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"systemctl daemon-reload\")]),s._v(\" \"),e(\"code\",[s._v(\"systemctl restart docker\")])])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"删除容器\")]),s._v(\" \"),e(\"ol\",[e(\"li\",[s._v(\"停止运行\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"docker stop [NAMES]\")])]),s._v(\" \"),e(\"li\",[s._v(\"删除\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"docker rm [NAMES || CONTAINER ID]\")])])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"常用命令\"),e(\"br\"),s._v(\" \"),e(\"code\",[s._v(\"docker run/start/stop/restart/log\")])])])]),s._v(\" \"),e(\"h2\",{attrs:{id:\"docker-compose\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-compose\"}},[s._v(\"#\")]),s._v(\" docker-compose\")]),s._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[s._v(\"下载 docker-compose\")]),s._v(\" \"),e(\"div\",{staticClass:\"language- line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[s._v('sudo curl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\\n')])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"给予执行权限\\n\"),e(\"code\",[s._v(\"sudo chmod +x /usr/local/bin/docker-compose\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"测试命令\\n\"),e(\"code\",[s._v(\"docker-compose --version\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"docker-compose.yml\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"version\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'3'\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"services\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n  \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"mysql\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"image\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" mysql\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"environment\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n      \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\" MYSQL_ROOT_PASSWORD=123456\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"ports\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n      \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\" 28002\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3306\")]),s._v(\"\\n  \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"mongo\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"image\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" mongo\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"restart\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" always\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"environment\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n      \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"MONGO_INITDB_ROOT_USERNAME\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" root\\n      \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"MONGO_INITDB_ROOT_PASSWORD\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" example\\n\\n  \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"mongo-express\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"image\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" mongo\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"express\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"restart\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" always\\n    \"),e(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"ports\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n      \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\" 8081\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8081\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),e(\"br\")])])]),s._v(\" \"),e(\"li\",[e(\"p\",[s._v(\"创建服务\\n\"),e(\"code\",[s._v(\"docker-compose up -d\")])])])]),s._v(\" \"),e(\"h2\",{attrs:{id:\"docker-hub\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-hub\"}},[s._v(\"#\")]),s._v(\" docker hub\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"log in\\n\"),e(\"code\",[s._v(\"docker login\")])]),s._v(\" \"),e(\"li\",[s._v(\"commit\"),e(\"div\",{staticClass:\"language- line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[s._v(\"docker commit [CONTAINER ID] [dockerhub prefix]/[respostry name]:[tag]\\ndocker commit bdcefb6b2613 milestien/mysql:1.0\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])])]),s._v(\" \"),e(\"li\",[s._v(\"push\\n\"),e(\"code\",[s._v(\"docker push milestien/mysql:1.0\")])]),s._v(\" \"),e(\"li\",[s._v(\"pull\\n\"),e(\"code\",[s._v(\"docker pull milestien/mysql5.7\")])])]),s._v(\" \"),e(\"h2\",{attrs:{id:\"常见问题\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#常见问题\"}},[s._v(\"#\")]),s._v(\" 常见问题\")]),s._v(\" \"),e(\"h3\",{attrs:{id:\"centos8-安装提示-container-io-版本过低\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#centos8-安装提示-container-io-版本过低\"}},[s._v(\"#\")]),s._v(\" centos8 安装提示 container.io 版本过低\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[s._v(\"yum list docker-ce\")])]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"yum list containerd.io\")])]),s._v(\" \"),e(\"li\",[s._v(\"问题原因：centos8 的 yum 库中没有符合最新版 docker-ce 对应版本的 containerd.io，docker-ce-3:19.03.11-3.el7.x86_64 需要 containerd.io >= 1.2.2-3\")]),s._v(\" \"),e(\"li\",[s._v(\"解决方案:\\n\"),e(\"ol\",[e(\"li\",[s._v(\"通过阿里云镜像库安装符合最新 docker-ce 版本的 containerd.io\\n\"),e(\"ul\",[e(\"li\",[e(\"code\",[s._v(\"yum install -y https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/edge/Packages/containerd.io-1.2.13-3.2.el7.x86_64.rpm\")])]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"sudo yum -y install docker-ce docker-ce-cli\")])])])]),s._v(\" \"),e(\"li\",[s._v(\"安装指定版本的 docker-ce 跟 containerd.io\\n\"),e(\"ul\",[e(\"li\",[e(\"code\",[s._v(\"sudo yum install -y docker-ce-18.09.1 docker-ce-cli-18.09.1\")])]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"sudo yum install docker-ce-<VERSION_STRING> docker-ce-cli-<VERSION_STRING> containerd.io\")])])])]),s._v(\" \"),e(\"li\",[s._v(\"centos7\")])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}